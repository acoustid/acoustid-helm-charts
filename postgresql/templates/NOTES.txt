PostgreSQL can be accessed via port 5432 on the following DNS name from within your cluster:

    {{ template "postgresql.fullname" . }}.{{ .Release.Namespace }}.svc.cluster.local

To connect to your database run the following command:

    PGUSER=$(kubectl get secret --namespace {{ .Release.Namespace }} {{ include "postgresql.superuserSecretName" . }} -o jsonpath="{.data.username}" | base64 --decode)
    PGPASSWORD=$(kubectl get secret --namespace {{ .Release.Namespace }} {{ include "postgresql.superuserSecretName" . }} -o jsonpath="{.data.password}" | base64 --decode)

    kubectl run {{ template "postgresql.fullname" . }}-client --rm --tty -i --restart='Never' --namespace {{ .Release.Namespace }} --image {{ .Values.image.repository }}:{{ .Values.image.tag }} --env="PGUSER=$PGUSER" --env="PGPASSWORD=$PGPASSWORD" --command -- psql -h {{ template "postgresql.fullname" . }}

You can control the cluster using `stolonctl` by running the following command:

    STOLONCTL_POD_NAME=$(kubectl get pod --namespace {{ .Release.Namespace }} -l app.kubernetes.io/name=postgresql,app.kubernetes.io/instance={{ .Release.Name }},app.kubernetes.io/component=stolonctl -o name)
    kubectl --namespace {{ .Release.Namespace }} exec -ti $STOLONCTL_POD_NAME stolonctl
